</br>
<h6>PAGES GROUPS</h6>
{% load crispy_forms_tags %}

<form id="form-groups" method="POST">
    {% csrf_token %}
    {{ exam_pages_groups_formset.management_form }}
    <button type="submit" name="submit-groups" style="margin-top:20px;margin-bottom:20px;" class="btn btn-primary btn-sm">Save groups</button>
    <table class="table" style="max-width:500px">
      <thead>
        <tr>
            {% for field in exam_pages_groups_formset.initial_forms.0 %}
            {% if field.label != 'Id' %}
            <th scope="col">{{ field.label }}</th>
            {% endif %}
            {% endfor %}
        </tr>
      </thead>
      <tbody id="group-tbody">
        {% for form in exam_pages_groups_formset.initial_forms %}
        <tr id="group-form">
            {% for hidden in form.hidden_fields %}
                {{ hidden }}
            {% endfor %}
            {% for field in form.visible_fields %}
            {% if field.label == 'Delete' %}
                <td style="text-align:center;padding-top:35px">{{ field }}</td>
            {% else %}
                <td>{{ field }}</td>
            {% endif %}
            {% endfor %}
        </tr>
        {% endfor %}
        <tr class="exam_pages_groups_formset_empty_form" hidden>
            {% for hidden in exam_pages_groups_formset.extra_forms.0.hidden_fields %}
                {{ hidden }}
            {% endfor %}
            {% for field in exam_pages_groups_formset.extra_forms.0.visible_fields %}
                {% if field.label == 'Delete' %}
                <td style="text-align:center;padding-top:35px">{{ field }}</td>
            {% else %}
                <td>{{ field }}</td>
            {% endif %}
            {% endfor %}
        </tr>
      </tbody>
    </table>
    <a id="add-form" style="margin-top:20px;" class="btn btn-outline-info btn-sm" href="{% url 'add_new_pages_group' exam.pk %}">Add Another Group</a>
</form>

<script type="text/javascript">
<!--  groupForm = document.querySelectorAll("#group-form");-->
<!--  container = document.querySelector("#group-tbody");-->
<!--  addButton = document.querySelector("#add-form");-->
<!--  totalForms = document.querySelector("#id_form-TOTAL_FORMS");-->
<!--&lt;!&ndash;  emptyForm = document.querySelector(".exam_pages_groups_formset_empty_form");&ndash;&gt;-->

<!--  formNum = groupForm.length-1;-->
<!--  addButton.addEventListener('click', addForm);-->

<!--  function addForm(e){-->
<!--    e.preventDefault();-->

<!--    newGroupForm = groupForm[0].cloneNode(true);-->
<!--    formRegex = RegExp(`form-__prefix__-`,'g');-->

<!--    formNum++;-->
<!--    newGroupForm.innerHTML = newGroupForm.innerHTML.replace(formRegex, `form-${formNum}-`);-->
<!--&lt;!&ndash;    newGroupForm.removeAttribute('hidden');&ndash;&gt;-->
<!--&lt;!&ndash;    newGroupForm.removeAttribute('class');&ndash;&gt;-->
<!--    insertAfter(newGroupForm,groupForm[formNum-1]);-->
<!--    totalForms.setAttribute('value', `${formNum+1}`);-->
<!--  };-->

<!--function insertAfter(newNode, existingNode) {-->
<!--    existingNode.parentNode.insertBefore(newNode, existingNode.nextSibling);-->
<!--}-->

</script>
