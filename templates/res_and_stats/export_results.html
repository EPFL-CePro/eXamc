{% extends 'base.html' %}

{% load crispy_forms_tags %}

{% block extra_head %}

{% endblock %}

{% block title %}Export{% endblock %}

{% block scripts %}

{% endblock %}

{% block content %}

{% if user_allowed %}

<h4><i class="fas fa-cloud-download-alt fa-l" style="margin-right:5px;"></i>Export results</h4>

<style>
.custom-radio-list {
    list-style-type: none;
}
.custom-radio-list div {
    margin-right: 60px;
}
</style>

{% if exam.scaleStatistics.all %}
<div id="export_div" style="padding:20px">
  <h5>Options :</h5>
  <form action="{% url 'export_data' exam.pk %}" method="POST" enctype="multipart/form-data" class="form-horizontal" style="padding:20px;">
    {% csrf_token %}
        <hr style="width:500px;margin-left: 0;">
      <h6>Select scale</h6>
        <hr style="width:500px;margin-left: 0;">
      </br>
      <div class="form-group form-check form-check-inline">
        {{ form.scale }}
      </div>
      {% if exam.is_overall %}
      </br>
        <hr style="width:500px;margin-left: 0;">
      <a>Select exams</a>
        <hr style="width:500px;margin-left: 0;">
      </br>
      <div class="form-group form-check form-check-inline">
        {{ form.common_exams }}
      </div>
      {% endif %}
      </br>
        <hr style="width:500px;margin-left: 0;">
      <h6>Files to expoprt</h6>
        <hr style="width:500px;margin-left: 0;">
      <div class="form-group form-check">
        {{ form.exportIsaCsv }}
        <label class="form-check-label" for="{{ form.exportIsaCsv.value }}">{{ form.exportIsaCsv.label_tag }}</label>
      </div>
      <div class="form-group form-check">
        {{ form.exportExamScalePdf }}
        <label class="form-check-label" for="{{ form.exportExamScalePdf.value }}">{{ form.exportExamScalePdf.label_tag }}</label>
      </div>
      <div class="form-group form-check">
        {{ form.exportStudentsDataCsv }}
        <label class="form-check-label" for="{{ form.exportStudentsDataCsv.value }}">{{ form.exportStudentsDataCsv.label_tag }}</label>
      </div>
        <button type="submit" class="btn btn-dark btn-sm"><i class="fas fa-cloud-download-alt" style="margin-right:5px;"></i>Export</button>
  </form>

</div>
{% else %}
<div class="alert alert-warning">
  <h4 class="alert-heading">Warning!</h4>
  <p class="mb-0">No data found for this exam. Please import data and generate statistics.</a>.</p>
</div>
{% endif %}
{% else %}

<h4>You are not allowed to view this page !</h4>

{% endif %}

{% endblock %}
