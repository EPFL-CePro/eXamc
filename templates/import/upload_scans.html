{% extends 'base.html' %}

{% block title %}Import scans{% endblock %}

{% block scripts %}

function startUpload(pk,filename){

	url = "{% url 'start_upload_scans' 999999 'FILENAME' %}".replace('999999',pk).replace('FILENAME',filename)

	$.ajax({
		url : url,
		type : "POST",
		data : {
			'csrfmiddlewaretoken' : "{{  csrf_token  }}"
		},
		beforeSend : function(){
			$('#loadingModal').modal('show');
		},
		complete: function () {
			$('#loadingModal').modal('hide');
		},
		success : function(result) {
			window.location.href += "?dataUpdated=true";
			window.location.reload();
		}
	});
}


{% endblock %}

{% block content %}
<div id="uploadScansDiv" style="padding:10px;width:100%;margin-top:100px;color:#000;">
	<h3>Upload scans</h3>

	<table class="table table-striped table-sm">
		<thead>
			<tr>
				<th>Available files</th>
				<th></th>
			</tr>
		</thead>
		<tbody>
			{% for file in files %}
			<tr>
				<td>{{ file }}</td>
				<td><button id="startUploadBt" onclick="startUpload( '{{ exam.pk }}' , '{{ file }}' );" class="btn btn-primary btn-sm"> <span class="glyphicon glyphicon-upload" style="margin-right:5px;"></span>Start upload</button></td>
			</tr>
			{% endfor %}
		</tbody>
	</table>
	<h6>{{ message }}</h6>

{% endblock %}
